(()=>{"use strict";class e extends class{constructor(){this.centerX=0,this.centerY=0,this.posX=0,this.posY=0,this.width=0,this.height=0,this.radius=0,this.canOverflowCanvas=!1,this.isRound=!1}process(e){this.canOverflowCanvas&&this.processCanvasOverflow()}draw(){}processCanvasOverflow(){this.isRound?this.processCanvasOverflowForRoundObject():this.processCanvasOverflowForRectObject()}processCanvasOverflowForRoundObject(){let e=$engine.getScene().getCanvas().height,s=$engine.getScene().getCanvas().width,t=this.radius;this.centerY>e+t&&(this.centerY=0),this.centerY<0-t&&(this.centerY=e),this.centerX>s+t&&(this.centerX=0),this.centerX<0-t&&(this.centerX=s)}processCanvasOverflowForRectObject(){let e=$engine.getScene().getCanvas().height,s=$engine.getScene().getCanvas().width,t=this.height,n=this.width;this.centerY>e+t&&(this.posY=0),this.centerY<0-t&&(this.posY=e),this.centerX>s+n&&(this.posX=0),this.centerX<0-n&&(this.posX=s)}}{constructor(){super(),this.isRound=!0,this.fillStyle="green",this.strokeWidth=5,this.strokeStyle="#003300"}process(e){this.canOverflowCanvas&&this.processCanvasOverflow()}draw(){this.drawRoundObject()}processCanvasOverflow(){this.isRound?this.processCanvasOverflowForRoundObject():this.processCanvasOverflowForRectObject()}processCanvasOverflowForRoundObject(){let e=$engine.getScene().getCanvas().height,s=$engine.getScene().getCanvas().width,t=this.radius;this.centerY>e+t&&(this.centerY=0),this.centerY<0-t&&(this.centerY=e),this.centerX>s+t&&(this.centerX=0),this.centerX<0-t&&(this.centerX=s)}processCanvasOverflowForRectObject(){let e=$engine.getScene().getCanvas().height,s=$engine.getScene().getCanvas().width,t=this.height,n=this.width;this.centerY>e+t&&(this.posY=0),this.centerY<0-t&&(this.posY=e),this.centerX>s+n&&(this.posX=0),this.centerX<0-n&&(this.posX=s)}drawRoundObject(){const e=$engine.getScene().get2DContext();e.beginPath(),e.arc(this.centerX,this.centerY,this.radius,0,2*Math.PI,!1),e.fillStyle=this.fillStyle,e.fill(),e.lineWidth=this.strokeWidth,e.strokeStyle=this.strokeStyle,e.stroke()}}class s extends e{constructor(){super(),this.canOverflowCanvas=!0,this.radius=10}process(e){this.processMovement(),super.process(e)}processMovement(){this.centerX+=5,this.centerY+=7}}class t{constructor(){this.elements=[],this.canvas=null,this.canvasCircleRadius=350,this.canvasCircleCenterX=350,this.canvasCircleCenterY=350}addElement(e){this.elements.push(e)}rerender(){this.drawElements()}getElements(){return this.elements}createCanvas(){let e=document.createElement("canvas");e.id="main_canvas",e.classList.add("main-canvas"),e.width=2*this.canvasCircleRadius,e.height=2*this.canvasCircleRadius;const s=document.querySelector("#pong");s.innerHTML="",s.append(e),this.canvas=e}drawElements(){this.getElements().forEach((e=>{e.draw()}))}clear(){this.get2DContext().clearRect(0,0,2*this.canvasCircleRadius,2*this.canvasCircleRadius)}getCanvas(){return this.canvas}get2DContext(){return this.canvas.getContext("2d")}}class n{constructor(){this.pressedKeys=[],document.addEventListener("keydown",(e=>{e.isComposing||229===e.keyCode||this.pressedKeys.push(e.code)})),document.addEventListener("keyup",(e=>{e.isComposing||229===e.keyCode||(this.pressedKeys=this.pressedKeys.filter((function(s,t,n){return s!==e.code})))}))}isKeyPressed(e){return this.pressedKeys.includes(e)}}class i extends e{constructor(){super(),this.canOverflowCanvas=!0,this.centerX=$engine.getScene().canvasCircleRadius,this.centerY=0,this.angle=-180,this.radius=20,this.fillStyle="red"}process(e){this.processKeyboardInput(e),super.process(e)}pointsOnCircle({radius:e,angle:s,cx:t,cy:n}){return s*=Math.PI/180,[t+e*Math.sin(s),n+e*Math.cos(s)]}processKeyboardInput(e){$engine.input.isKeyPressed("ArrowLeft")&&(this.angle+=1.5),$engine.input.isKeyPressed("ArrowRight")&&(this.angle-=1.5);const[s,t]=this.pointsOnCircle({radius:$engine.getScene().canvasCircleRadius,angle:this.angle,cx:$engine.getScene().canvasCircleCenterX,cy:$engine.getScene().canvasCircleCenterX});this.centerX=s,this.centerY=t}}class r{start(){this.input=new n,this.runScene()}runScene(){this.scene=new t,this.scene.createCanvas();const e=new s,n=new i;this.scene.addElement(e),this.scene.addElement(n),this.processScene()}getScene(){return this.scene}processScene(){this.scene.clear(),this.scene.rerender(),this.scene.getElements().forEach((e=>{e.process()})),requestAnimationFrame((()=>this.processScene()))}}document.querySelector(".run-game").addEventListener("click",(function(){window.$engine=new r,$engine.start()}))})();
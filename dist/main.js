(()=>{"use strict";class e{constructor(){this.centerX=0,this.centerY=0,this.posX=0,this.posY=0,this.width=0,this.height=0,this.radius=0,this.canOverflowCanvas=!1,this.isRound=!1}process(e){this.canOverflowCanvas&&this.processCanvasOverflow()}draw(){}processCanvasOverflow(){this.isRound?this.processCanvasOverflowForRoundObject():this.processCanvasOverflowForRectObject()}processCanvasOverflowForRoundObject(){let e=$engine.getScene().getCanvas().height,s=$engine.getScene().getCanvas().width,t=this.radius;this.centerY>e+t&&(this.centerY=0),this.centerY<0-t&&(this.centerY=e),this.centerX>s+t&&(this.centerX=0),this.centerX<0-t&&(this.centerX=s)}processCanvasOverflowForRectObject(){let e=$engine.getScene().getCanvas().height,s=$engine.getScene().getCanvas().width,t=this.height,n=this.width;this.centerY>e+t&&(this.posY=0),this.centerY<0-t&&(this.posY=e),this.centerX>s+n&&(this.posX=0),this.centerX<0-n&&(this.posX=s)}}class s extends e{constructor(){super(),this.canOverflowCanvas=!0,this.isRound=!0,this.radius=10}process(e){this.processMovement(),super.process(e)}draw(){this.drawBall()}drawBall(){const e=$engine.getScene().get2DContext();e.beginPath(),e.arc(this.centerX,this.centerY,this.radius,0,2*Math.PI,!1),e.fillStyle="green",e.fill(),e.lineWidth=5,e.strokeStyle="#003300",e.stroke()}processMovement(){this.centerX+=5,this.centerY+=7}}class t{constructor(){this.elements=[],this.canvas=null}addElement(e){this.elements.push(e)}rerender(){this.drawElements()}getElements(){return this.elements}createCanvas(){let e=document.createElement("canvas");e.id="main_canvas",e.classList.add("main-canvas"),e.width=700,e.height=700;const s=document.querySelector("#pong");s.innerHTML="",s.append(e),this.canvas=e}drawElements(){this.getElements().forEach((e=>{e.draw()}))}clear(){this.get2DContext().clearRect(0,0,700,700)}getCanvas(){return this.canvas}get2DContext(){return this.canvas.getContext("2d")}}class n{constructor(){this.pressedKeys=[],document.addEventListener("keydown",(e=>{e.isComposing||229===e.keyCode||(console.log(e.code),this.pressedKeys.push(e.code))})),document.addEventListener("keyup",(e=>{e.isComposing||229===e.keyCode||(this.pressedKeys=this.pressedKeys.filter((function(s,t,n){return s!==e.code})))}))}isKeyPressed(e){return this.pressedKeys.includes(e)}}class i extends e{constructor(){super(),this.canOverflowCanvas=!0,this.velocity=7,this.width=15,this.height=40}process(e){this.processKeyboardInput(e),super.process(e)}draw(){this.drawPlayer()}drawPlayer(){const e=$engine.getScene().get2DContext();e.beginPath(),e.rect(this.posX,this.posY,this.width,this.height),e.fillStyle="red",e.fill()}processKeyboardInput(e){$engine.input.isKeyPressed("ArrowDown")&&(this.posY+=this.velocity),$engine.input.isKeyPressed("ArrowUp")&&(this.posY-=this.velocity),$engine.input.isKeyPressed("ArrowLeft")&&(this.posX-=this.velocity),$engine.input.isKeyPressed("ArrowRight")&&(this.posX+=this.velocity),this.centerX=this.posX+this.width/2,this.centerY=this.posY+this.height/2}}class r{start(){this.input=new n,this.runScene()}runScene(){this.scene=new t,this.scene.createCanvas();const e=new s,n=new i;this.scene.addElement(e),this.scene.addElement(n),this.processScene()}getScene(){return this.scene}processScene(){this.scene.clear(),this.scene.rerender(),this.scene.getElements().forEach((e=>{e.process()})),requestAnimationFrame((()=>this.processScene()))}}document.querySelector(".run-game").addEventListener("click",(function(){window.$engine=new r,$engine.start()}))})();